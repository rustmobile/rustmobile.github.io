<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rust on Mobile</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Building a Rust library and use it across platforms">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Custom Elements -->
        <script type="text/javascript" src="https://static.ghamza.dev/js/code-line-highlight.js"></script>
        <link href="https://fonts.googleapis.com/css?family=Fira+Code" rel="stylesheet">
        <style>
            code {
                font-family: 'Fira Code', sans-serif !important;
            }
        </style>
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="architecture.html"><strong aria-hidden="true">2.</strong> Architecture</a></li><li class="chapter-item expanded "><a href="setup/README.md.html"><strong aria-hidden="true">3.</strong> Setup</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="setup/makefile.html"><strong aria-hidden="true">3.1.</strong> Setup Makefile</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">4.</strong> Android Glue</div></li><li><ol class="section"><li class="chapter-item expanded "><a href="android/setup.html"><strong aria-hidden="true">4.1.</strong> Setup</a></li><li class="chapter-item expanded "><a href="android/jni.html"><strong aria-hidden="true">4.2.</strong> JNI</a></li><li class="chapter-item expanded "><a href="android/module.html"><strong aria-hidden="true">4.3.</strong> Module</a></li><li class="chapter-item expanded "><a href="android/build.html"><strong aria-hidden="true">4.4.</strong> Building</a></li></ol></li><li class="chapter-item expanded "><div><strong aria-hidden="true">5.</strong> iOS Glue</div></li><li class="chapter-item expanded "><div><strong aria-hidden="true">6.</strong> More Examples</div></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Rust on Mobile</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/ghamza-rust/ghamza-rust.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="rust--on-mobile-"><a class="header" href="#rust--on-mobile-">Rust ðŸ¦€ on Mobile ðŸ“±</a></h1>
<p>This small book describes how to use Rust and Mobile (android and iOS) together.</p>
<h2 id="who-is-this-book-for"><a class="header" href="#who-is-this-book-for">Who is this book for?</a></h2>
<p>This book is for anyone interested in compiling Rust to android or iOS for fast,
reliable code on the mobile. You should know some Rust, and be familiar with
Kotlin and Swift. You don't need to be an expert in any of them.</p>
<h2 id="how-to-read-this-book"><a class="header" href="#how-to-read-this-book">How to read this book?</a></h2>
<p>The book is written to be read from start to finish. You should follow
along:writing, compiling, and running the tutorial's code yourself.</p>
<p>We will build a rust library in this series and port it to different platforms.
We are calling it <code>libexa</code> (which stands for Example Library ðŸ«£).</p>
<h2 id="low-level-control-with-high-level-ergonomics"><a class="header" href="#low-level-control-with-high-level-ergonomics">Low-Level Control with High-Level Ergonomics</a></h2>
<p>Rust gives programmers low-level control and reliable performance. It is free
from the non-deterministic garbage collection pauses that plague Kotlin/Swift.
Programmers have control over indirection, monomorphization, and memory layout.</p>
<h2 id="do-not-rewrite-everything"><a class="header" href="#do-not-rewrite-everything">Do <em>Not</em> Rewrite Everything</a></h2>
<p>Existing code bases don't need to be thrown away. You can start by porting your
most performance-sensitive Swift/Kotlin functions to Rust to gain immediate
benefits. And you can even stop there if you want to.</p>
<p>I strongly recommend <a href="https://www.rust-lang.org/tools/install">installing all of your Rust toolchains using rustup.</a></p>
<blockquote>
<p><em>The code of this tutorial is available on <a href="https://github.com/Ghamza-Jd/exa-lib">Ghamza-Jd/exa-lib</a></em></p>
<p><em>This book is open source! Find a typo? Did we overlook something?
Is something missing? Send us a Pull Request!</em></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="architecture"><a class="header" href="#architecture">Architecture</a></h1>
<p>In this section we're going to talk about the architecture of this library</p>
<h2 id="core"><a class="header" href="#core">Core</a></h2>
<p>The heart of our library, it contains code that works independent from
the OS and the chip. The <code>core</code> of the library should be like any rust
library out there, our twist is porting it to other platforms.</p>
<h2 id="glue"><a class="header" href="#glue">Glue</a></h2>
<p>Porting our rust library requries us to write glue code, each platform has
its set of conventions they follow. Java has JNI (Java Native Interface) and
iOS uses C conventions.</p>
<h2 id="core--glue"><a class="header" href="#core--glue">Core + Glue</a></h2>
<p>So our architecture is making the logic inside of <code>core</code> using rust,
and our problem will be only about writing glue code.</p>
<pre><code class="language-plantuml format=svg">@startuml
!theme sketchy-outline

!$android = &quot;Android\nKotlin/Java&quot;
!$ios = &quot;iOS\nSwift/Objective-C&quot;
!$jni = &quot;Java Native Interface&quot;
!$c = &quot;C Interface&quot;
!$core = &quot;Core Lib&quot;

card &quot;$ios&quot;
card &quot;$android&quot;

component &quot;Rust&quot; {
  port &quot;$c&quot;
  port &quot;$jni&quot;
  card &quot;$core&quot;
}

&quot;$ios&quot; ~~&gt; &quot;$c&quot;
&quot;$android&quot; ~~&gt; &quot;$jni&quot;

&quot;$c&quot; ~~&gt; &quot;$core&quot;
&quot;$jni&quot; ~~&gt; &quot;$core&quot;
@enduml
</code></pre>
<p>Now when we want to introduce another platform, the web for an instance,
we only have to worry about writing a glue code to support web.</p>
<pre><code class="language-plantuml format=svg">@startuml
!theme sketchy-outline

!$android = &quot;Android\nKotlin/Java&quot;
!$ios = &quot;iOS\nSwift/Objective-C&quot;
!$web = &quot;Web\nJavaScript&quot;
!$jni = &quot;Java Native Interface&quot;
!$c = &quot;C Interface&quot;
!$wasm = &quot;WASM&quot;
!$core = &quot;Core Lib&quot;

card &quot;$ios&quot;
card &quot;$android&quot;
card &quot;$web&quot;

component &quot;Rust&quot; {
  port &quot;$c&quot;
  port &quot;$jni&quot;
  port &quot;$wasm&quot;
  card &quot;$core&quot;
}

&quot;$ios&quot; ~~&gt; &quot;$c&quot;
&quot;$android&quot; ~~&gt; &quot;$jni&quot;
&quot;$web&quot; ~~&gt; &quot;$wasm&quot;

&quot;$c&quot; ~~&gt; &quot;$core&quot;
&quot;$jni&quot; ~~&gt; &quot;$core&quot;
&quot;$wasm&quot; ~~&gt; &quot;$core&quot;
@enduml
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setup"><a class="header" href="#setup">Setup</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setup-makefile"><a class="header" href="#setup-makefile">Setup Makefile</a></h1>
<p>In this section we are going to create <code>Makefile</code> that will contain our commands.</p>
<pre><code class="language-bash">touch Makefile
</code></pre>
<p>We will start by adding android and iOS targets</p>
<pre><code class="language-Makefile">ios_targets = aarch64-apple-ios \
	x86_64-apple-ios \
	aarch64-apple-ios-sim

android_targets = armv7-linux-androideabi \
	i686-linux-android \
	aarch64-linux-android \
	x86_64-linux-android
</code></pre>
<p>Now we can loop over those targets to do whatever we want, as a beginning we
can add this targets to our tool chain under a setup command.</p>
<pre><code class="language-Makefile [hl 10-18]">ios_targets = aarch64-apple-ios \
	x86_64-apple-ios \
	aarch64-apple-ios-sim

android_targets = armv7-linux-androideabi \
	i686-linux-android \
	aarch64-linux-android \
	x86_64-linux-android

android-setup:
	@for target in ${android_targets} ; do \
        rustup target add $$target ; \
    done

ios-setup:
	@for target in ${ios_targets} ; do \
        rustup target add $$target ; \
    done
</code></pre>
<p>For iOS we also want to install <code>cargo-lipo</code>, which automatically creates a
universal library for use with your iOS application.</p>
<pre><code class="language-Makefile [hl 7]">android-setup:
	@for target in ${android_targets} ; do \
        rustup target add $$target ; \
    done

ios-setup:
	cargo install cargo-lipo

	@for target in ${ios_targets} ; do \
        rustup target add $$target ; \
    done
</code></pre>
<p>Now to set our iOS and android from rust side we run simple</p>
<pre><code class="language-bash">make ios-setup
make android-setup
</code></pre>
<blockquote>
<p><strong>ðŸ“„ Note:</strong> <em>We should use hard tabs in our <code>Makefile</code>, spaces will result in
&quot;missing separator&quot;</em></p>
</blockquote>
<p>To make sure we use hard tabs we can add this rule in our <code>.editorconfig</code>.</p>
<pre><code class="language-toml [hl 9-11]"># https://editorconfig.org

root = true

[*]
insert_final_newline = true
trim_trailing_whitespace = true

[Makefile]
indent_style = tab
indent_size = 4
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="android-setup"><a class="header" href="#android-setup">Android Setup</a></h1>
<h2 id="library-target"><a class="header" href="#library-target">Library Target</a></h2>
<p>Inside <code>glue/ios/Cargo.toml</code> add the library target and make the crate type a
static library</p>
<pre><code class="language-toml [hl 6-8]">[package]
name = &quot;android&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

[lib]
name = &quot;proximon&quot;
crate_type = [&quot;staticlib&quot;, &quot;dylib&quot;]
</code></pre>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<ul>
<li><code>exa_core</code>; our core library</li>
<li><code>jni</code>; java native interface</li>
<li><code>openssl-sys</code></li>
<li><code>log</code></li>
<li><code>log-panics</code></li>
<li><code>android_logger</code></li>
</ul>
<p>Run</p>
<pre><code class="language-shell"># From the project root directory
cargo add -p android --path ./exa_core/
cargo add -p android jni log log-panics android_logger
cargo add -p android openssl-sys --features vendored
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="jni"><a class="header" href="#jni">JNI</a></h1>
<h2 id="jni-setup"><a class="header" href="#jni-setup">JNI setup</a></h2>
<h3 id="logger"><a class="header" href="#logger">Logger</a></h3>
<p>Let us start simple by creating a logger that logs to logcat.</p>
<p>Create <code>glue/android/src/logger.rs</code> file, we will configure the logger there</p>
<pre><code class="language-rust">use android_logger::Config;
use jni::objects::JClass;
use jni::JNIEnv;
use log::Level;

#[no_mangle]
#[allow(non_snake_case)]
pub extern &quot;system&quot; fn Java_com_example_exa_ExaLogger_initLogger(
    _env: JNIEnv,
    _: JClass
) {
    android_logger::init_once(
        Config::default()
            .with_min_level(Level::Trace)
            .with_tag(&quot;Exa&quot;),
    );
    log_panics::init();
    info!(&quot;ExaLogger initialized&quot;);
}</code></pre>
<p>Before explaining why we named the function using Pascal_snake_CamelCase if
that's a thing; let us add this as a public module in the <code>lib.rs</code></p>
<pre><code class="language-rust">// glue/android/src/lib.rs
#[macro_use]
extern crate log;

pub mod logger;</code></pre>
<p>The first two lines are there so we can use <code>info!()</code> without importing it in
every single file when logging an info message.</p>
<h3 id="jni-conventions"><a class="header" href="#jni-conventions">JNI Conventions</a></h3>
<p>So in the previous section we create this function <code>Java_com_example_exa_ExaLogger_initLogger</code>
, in order to call a native function from JVM we should respect the JNI's
convention (at least some of them for our use case).</p>
<ol>
<li>The function should start with <code>Java</code></li>
<li>We should provide the path to the class, if the class is in the package
<code>com.example.exa</code> then we should add <code>com_example_exa</code> in the function name</li>
<li>Add the Java class name</li>
<li>Add the function name to the signature we have</li>
</ol>
<p>So looking at this signature, the JVM is going to look for a class called
<code>ExaLogger</code> in the <code>com.example.exa</code> package, and execute a function called <code>initLogger</code>.</p>
<p>Last but not least, we should always pass the enviroment and the class, even if
we're not using any of them.</p>
<p>Now we run into an issue of how we make it reusable, if we take this library and
put it in another project it's not going to work, as that project has a different
package names and such.</p>
<p>As a solution we can make an android module, when we build that module we produce
an android archive that can be used on multiple projects; <code>.aar</code> file.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="module"><a class="header" href="#module">Module</a></h1>
<h2 id="android-module"><a class="header" href="#android-module">Android Module</a></h2>
<p>We can't create an android module without creating android project, so we're
going to create an android project, create an android module, then remove the
application part and keep the library part.</p>
<p>Create android project in the <code>glue</code> folder, choose the <code>No Activity</code> Template.</p>
<h3 id="create-android-project"><a class="header" href="#create-android-project">Create Android Project</a></h3>
<p>Create android project:</p>
<ol>
<li>Choose <code>No Activity</code> Template</li>
<li>Name the app something other than <code>exa</code> and the package to something other
than <code>com.example.exa</code> because we're going to use those for the android
library. (I'll call it <code>tempexa</code> since its going to be removed after
making the module)</li>
<li>Place it in the <code>glue</code> folder and name it <code>android_module</code>, so the location
should be ending with <code>exa-lib/glue/android_module</code></li>
</ol>
<h3 id="create-android-module"><a class="header" href="#create-android-module">Create Android Module</a></h3>
<p>To create an android module:</p>
<ol>
<li>Click <strong>File &gt; New &gt; New Module</strong></li>
<li>Choose <strong>Android Library</strong> template</li>
<li>Name the module <code>exa</code></li>
<li>Name the package <code>com.example.exa</code></li>
<li>Finish</li>
</ol>
<h3 id="remove-the-application-module"><a class="header" href="#remove-the-application-module">Remove the Application Module</a></h3>
<ol>
<li>Remove <code>include ':app'</code> from <code>settings.gradle</code></li>
<li>Delete the <code>app</code> directory recursively <code>rm -rf ./glue/android_module/app</code></li>
<li>Remove <code>id 'com.android.application</code> from <code>glue/android_module/build.gradle</code>,
as its no longer needed</li>
</ol>
<h3 id="adding-the-jni-method"><a class="header" href="#adding-the-jni-method">Adding the JNI Method</a></h3>
<p>Now we should respect the conventions that we've talked about earlier.</p>
<p>First create a (kotlin) class named <code>ExaLogger</code> inside <code>com.example.exa</code>, inside
of it we need to have an external function and load the library.</p>
<pre><code class="language-kotlin">package com.example.exa

class ExaLogger {
    companion object {
        init {
            System.loadLibrary(&quot;exa&quot;)
        }
    }

    public external fun initLogger()
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="build"><a class="header" href="#build">Build</a></h1>
<h2 id="building-the-library"><a class="header" href="#building-the-library">Building the Library</a></h2>
<p>Finally this section ðŸ˜‚</p>
<blockquote>
<p><em>You can write your own scripts for building the rust code using android ndk and
get <code>.so</code> files out of it, if you're going that way keep an eye on <code>libunwind.a</code>
issue.</em></p>
<p><a href="https://github.com/rust-lang/rust/issues/103673">libunwind issue</a></p>
<p><a href="https://stackoverflow.com/questions/68873570/how-do-i-fix-ld-error-unable-to-find-library-lgcc-when-cross-compiling-rust">possible solution</a></p>
</blockquote>
<h3 id="setup-gradle"><a class="header" href="#setup-gradle">Setup Gradle</a></h3>
<ol>
<li>In the top level <code>build.gradle</code> (<code>glue/android_module/build.gradle</code>) add
<code>id &quot;org.mozilla.rust-android-gradle.rust-android&quot; version &quot;0.9.3&quot; apply true</code></li>
<li>In the <code>exa</code> module <code>build.gradlew</code> (<code>glue/android_module/exa/build.gradle</code>)
add the following:</li>
</ol>
<pre><code class="language-gradle {hl_lines=[4 10  &quot;35-66&quot;] linenostart=1}">plugins {
    id 'com.android.library'
    id 'org.jetbrains.kotlin.android'
    id 'org.mozilla.rust-android-gradle.rust-android'
}

android {
    namespace 'com.example.exa'
    compileSdk 32
    ndkVersion &quot;25.0.8775105&quot;

    defaultConfig {
        minSdk 21
        targetSdk 32

        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;
        consumerProguardFiles &quot;consumer-rules.pro&quot;
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    kotlinOptions {
        jvmTarget = '1.8'
    }
}

cargo {
    module  = &quot;../..&quot;
    targets = [&quot;arm64&quot;, &quot;arm&quot;, &quot;x86_64&quot;, &quot;x86&quot;]
    libname = &quot;exa&quot;
    profile = &quot;release&quot;
    pythonCommand = &quot;python3&quot;
    extraCargoBuildArguments = ['-p', 'android']
}

dependencies {
    implementation 'androidx.core:core-ktx:1.7.0'
    testImplementation 'junit:junit:4.13.2'
    androidTestImplementation 'androidx.test.ext:junit:1.1.3'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.4.0'
}

tasks.whenTaskAdded { task -&gt;
    if ((task.name == 'javaPreCompileDebug' || task.name == 'javaPreCompileRelease')) {
        task.dependsOn 'cargoBuild'
    }
}

afterEvaluate {
    android.libraryVariants.all { variant -&gt;
        def productFlavor = &quot;&quot;
        variant.productFlavors.each {
            productFlavor += &quot;${it.name.capitalize()}&quot;
        }
        def buildType = &quot;${variant.buildType.name.capitalize()}&quot;
        tasks[&quot;generate${productFlavor}${buildType}Assets&quot;].dependsOn(tasks[&quot;cargoBuild&quot;])
    }
}
</code></pre>
<p>I'm using version <code>25.0.8775105</code> of NDK, change that with what you have on your
machine, but make sure its &gt;= version 23</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>


        <!-- Google Analytics Tag -->
        <script type="text/javascript">
            var localAddrs = ["localhost", "127.0.0.1", ""];

            // make sure we don't activate google analytics if the developer is
            // inspecting the book locally...
            if (localAddrs.indexOf(document.location.hostname) === -1) {
                (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
                })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

                ga('create', 'G-M9GYS9Z1XC', 'auto');
                ga('send', 'pageview');
            }
        </script>


        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
